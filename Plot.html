<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Ex. 2: GeoJSON</title>

    <link rel="stylesheet" href="styles/bootstrap.min.css">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
        crossorigin="" />

</head>

<body>


    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/">Lab 5: Web Mapping</a>

        <div>
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/">&laquo; Back
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="row mt-5">
            <div class="col">
                <h1>GeoJSON Example</h1>
                <div id="map-holder" style="min-height: 500px;"></div>
            </div>
        </div>
    </div>


    <script src="scripts/vendor/jquery.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
        crossorigin=""></script>

    <script>
        var geojson,
            activeLayer;
        $(document).ready(function () {


            var map = new L.Map('map-holder', {
                center: new L.LatLng(52.408, -4.128),
                zoom: 1
            });

            L.tileLayer('http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png', {
                minZoom: 7,
                maxZoom: 15,
                noWrap: true,
                attribution: 'Data: CSO.ie | Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'
            }).addTo(map);

            var tweetData = {
                "type": "FeatureCollection",
                "features": [
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -6.2602732,
                                53.3497645

                            ]
                        },
                        "properties": {
                            "name": "Dublin City"
                        }
                    },
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [

                                -7.9794599,
                                52.865196
                            ]
                        },
                        "properties": {
                            "name": "Ireland"
                        }
                    },
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [

                                -6.40734708789517,
                                53.27367045
                            ]
                        },
                        "properties": {
                            "name": "South Dublin"
                        }
                    },
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -8.4705806,
                                51.8979282

                            ]
                        },
                        "properties": {
                            "name": "Cork"
                        }
                    },
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -1.96439612333127,
                                52.5050033

                            ]
                        },
                        "properties": {
                            "name": "West Midlands"
                        }
                    },
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -6.2602732,
                                53.3497645

                            ]
                        },
                        "properties": {
                            "name": "Dublin City"
                        }
                    },
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -6.81841756609764,
                                53.15436455

                            ]
                        },
                        "properties": {
                            "name": "Kildare"
                        }
                    },
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                -8.6301239,
                                52.661252

                            ]
                        },
                        "properties": {
                            "name": "Limerick"
                        }
                    }
                ]
            };
            //L.geoJSON(tweetData).addTo(map);

            $.getJSON('data/testGeoJSON.json', function (data) {

                console.log(data);

                geojson = L.geoJSON(data, {
                    ////////////////////////////////
                    ///  Step 1 - look of the layer
                    ////////////////////////////////
                    style: {
                        color: '#fff',
                        weight: 1,
                        fillColor: '#0D6759',
                        fillOpacity: 1
                    },
                    ////////////////////////////////
                    ///  Step 2 - interaction
                    ////////////////////////////////
                    // ,
                    onEachFeature: onEachFeature
                }).addTo(map);
            });


            // function highlightLayer(e)
            // {
            //     var layer = e.target; 
            //     activeLayer = layer;

            //     layer.setStyle({
            //         color: '#fff',            
            //         fillColor: '#3ab34a'
            //     });

            //     if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
            //         layer.bringToFront();
            //     }

            // }

            // function resetHighlight(e) {
            //     geojson.resetStyle(e.target);
            // }


            function onEachFeature(feature, layer) {
                console.log(feature);
                console.log(layer);
                var popUpContent = '<strong>' + feature.properties.name + '</strong>';
                layer.bindPopup(popUpContent);
            }

            // layer.on({            
            //     mouseover: highlightLayer,                
            //     mouseout: resetHighlight
            // });

            ////////////////////////////////
            ///  Step 2 - add a popup
            // ////////////////////////////////
            // var popUpContent = '<strong>' + feature.properties.Nane + '</strong>';
            // L.bindPopup(popUpContent);

        });

    </script>
</body>

</html>